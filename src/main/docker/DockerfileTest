FROM localhost:8083/centos:7
COPY test/scripts/google-chrome.repo /etc/yum.repos.d/
RUN yum install -y  curl google-chrome-stable
RUN curl --silent --location https://rpm.nodesource.com/setup_10.x | bash -
RUN yum install -y nodejs wget Xvfb 
RUN npm config set unsafe-perm=true && npm install -g selenium-side-runner chromedriver
RUN wget https://repo1.maven.org/maven2/org/flywaydb/flyway-commandline/5.1.4/flyway-commandline-5.1.4-linux-x64.tar.gz -O /tmp/flyway.tgz && mkdir /tmp/flyway && tar xvfz  /tmp/flyway.tgz -C /tmp/flyway --strip-components=1
COPY test/scripts/ /tmp/testscripts/
COPY test/flyway* /tmp/flyway/sql
ENTRYPOINT /tmp/testscripts/test.sh
